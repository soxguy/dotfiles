# ~/.zshrc - Main ZSH configuration loader
#
# This file sources modular configuration from ~/.config/zsh/
# Order matters: path → exports → [interactive: secrets → aliases → plugins → prompt]

# Define config directory
ZSHCONFDIR="${HOME}/.config/zsh"

# Load local overrides first (not managed by chezmoi)
# Allows overriding BW_LOCAL_ACCT, BW_ENV_VARS_NOTE, PATH additions, etc.
[[ -f "$ZSHCONFDIR/local.zsh" ]] && source "$ZSHCONFDIR/local.zsh"

# Always source these (needed for all shells, including non-interactive)
[[ -f "$ZSHCONFDIR/path.zsh" ]] && source "$ZSHCONFDIR/path.zsh"
[[ -f "$ZSHCONFDIR/exports.zsh" ]] && source "$ZSHCONFDIR/exports.zsh"

# Only source interactive-only files when running an interactive shell
if [[ $- == *i* ]]; then
    [[ -f "$ZSHCONFDIR/secrets.zsh" ]] && source "$ZSHCONFDIR/secrets.zsh"
    [[ -f "$ZSHCONFDIR/aliases.zsh" ]] && source "$ZSHCONFDIR/aliases.zsh"
    [[ -f "$ZSHCONFDIR/aws.zsh" ]] && source "$ZSHCONFDIR/aws.zsh"
    [[ -f "$ZSHCONFDIR/plugins.zsh" ]] && source "$ZSHCONFDIR/plugins.zsh"
    [[ -f "$ZSHCONFDIR/prompt.zsh" ]] && source "$ZSHCONFDIR/prompt.zsh"
fi

unset ZSHCONFDIR
