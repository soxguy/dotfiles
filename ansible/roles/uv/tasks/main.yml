---
- name: Check if uv is installed
  command: which uv
  register: uv_check
  changed_when: false
  failed_when: false

- name: Install uv
  shell: |
    curl -LsSf https://astral.sh/uv/install.sh | sh
  args:
    creates: "{{ ansible_facts.env.HOME }}/.local/bin/uv"
  when: uv_check.rc != 0
  environment:
    PATH: "{{ ansible_facts.env.HOME }}/.local/bin:{{ ansible_facts.env.PATH }}"
